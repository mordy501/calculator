<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<meta name="color-scheme" content="light" />
<title>Ø­Ø§Ø³Ø¨Ø© Ø±Ø³ÙˆÙ… ØªØ§Ø¨ÙŠ ÙˆØªÙ…Ø§Ø±Ø§</title>
<meta name="description" content="Ø­Ø§Ø³Ø¨Ø© Ø°ÙƒÙŠØ© Ù„Ø­Ø³Ø§Ø¨ ØµØ§ÙÙŠ Ø§Ù„ØªØ§Ø¬Ø± Ø¨Ø¹Ø¯ Ø¹Ù…ÙˆÙ„Ø© Ù…Ø²ÙˆØ¯ÙŠ Ø§Ø¯ÙØ¹ Ù„Ø§Ø­Ù‚Ø§Ù‹ (ØªØ§Ø¨ÙŠ/ØªÙ…Ø§Ø±Ø§) Ù…Ø¹ Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø¥Ù„Ø²Ø§Ù…ÙŠÙ‹Ø§.">
<style>
  :root{
    --brand:#1ABC9C;
    --brand-dark:#148F77;
    --bg:#ffffff;
    --surface:#ffffff;
    --text:#2d3436;
    --muted:#59616a;
    --ring: 0 0 0 3px rgba(26,188,156,.18);
    --r-lg:16px; --r-md:12px; --r-sm:8px;
    --shadow-1: 0 10px 30px rgba(0,0,0,.08);
    --shadow-2: 0 18px 50px rgba(0,0,0,.10);
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    background:var(--bg);
    color:var(--text);
    font:16px/1.65 ui-rounded,"Cairo","Segoe UI",system-ui,-apple-system,Roboto,Arial;
  }

  .calculator-container{
    max-width: 760px;
    margin: clamp(16px,4vw,32px) auto;
    padding: clamp(16px,3vw,28px);
    background: var(--surface);
    border-radius: 20px;
    box-shadow: var(--shadow-2);
    border: 1px solid rgba(0,0,0,.06);
  }

  .calculator-header{ text-align:center; margin-bottom:1.2rem }
  .calculator-header h2{
    font-size: clamp(1.4rem, 2.6vw, 2rem);
    margin:0 0 .35rem;
    letter-spacing:.2px
  }
  .subtitle{ margin:0; color:var(--muted); font-size:.98rem }

  .sar-symbol{ height:22px; width:auto; vertical-align:middle; margin:0 3px }
  .input-group{ margin-bottom:1rem }
  .input-group label{ display:block; margin-bottom:.5rem; color:var(--muted); font-weight:600 }
  .input-field{
    width:100%; padding:12px 14px; border:2px solid #dee2e6; border-radius:12px;
    font-size:1rem; background:transparent; color:inherit;
    transition: box-shadow .2s, border-color .2s, transform .05s
  }
  .input-field:focus{ border-color: var(--brand); box-shadow: var(--ring); outline: none }

  .company-select{
    display:grid; grid-template-columns: repeat(2, 1fr);
    gap: 14px; margin-bottom: 1.1rem
  }
  @media (max-width:560px){ .company-select{ grid-template-columns:1fr } }

  .company-option{
    padding:16px; border:2px solid #dee2e6; border-radius:14px; background: #fff;
    cursor:pointer; text-align:center;
    transition: transform .08s, border-color .2s, background .2s, box-shadow .2s
  }
  .company-option:hover{ transform: translateY(-1px) }
  .company-option.active{
  border-color: transparent !important;
  background: rgba(26,188,156,.22) !important; /* Ø¯Ø±Ø¬Ø© Ø£ÙˆØ¶Ø­ */
  box-shadow: 0 8px 22px rgba(26,188,156,.15); /* Ø¸Ù„ Ø£Ø¹Ù…Ù‚ Ù‚Ù„ÙŠÙ„Ø§Ù‹ */
}
  .company-logo{ height:76px; width:auto; margin-bottom:12px; object-fit:contain }

  .calculate-btn{
    width:100%; padding:14px; color:#fff; border:0; border-radius:14px;
    font-size:1.05rem; font-weight:800;
    background: linear-gradient(45deg, var(--brand), var(--brand-dark));
    box-shadow: 0 10px 26px rgba(26,188,156,.28);
    cursor:pointer; transition: transform .06s, filter .2s
  }
  .calculate-btn:hover{ filter: brightness(1.05) }
  .calculate-btn:active{ transform: translateY(1px) scale(.997) }

  .results-box{
    margin-top: 1.4rem; padding: 1.2rem;
    background: var(--surface); border-radius:14px;
    box-shadow: var(--shadow-1)
  }

  .result-item{
    display:flex; justify-content:space-between; align-items:center;
    margin-bottom:.75rem; padding:12px;
    background: #f8f9fa !important; border-radius:10px; color: #2d3436 !important;
  }

  .result-accent{
    background: #e4f8ee !important;
    color: #2d3436 !important;
    font-weight: 800;
  }

  .tax-section{ margin-top:1rem; padding-top:1rem; border-top:2px dashed #dee2e6 }
  .badge{
    display:inline-flex; gap:8px; align-items:center; padding:6px 10px;
    border-radius:999px; font-size:.82rem;
    background: rgba(26,188,156,.10);
    color: var(--brand);
    border:1px solid rgba(26,188,156,.25)
  }
  .share{
    display:flex; gap:10px; flex-wrap:wrap; justify-content:center; margin-top:10px
  }
  .share a{
    display:inline-flex; align-items:center; gap:8px;
    padding:10px 12px; border-radius:12px;
    text-decoration:none;
    border:1px solid rgba(26,188,156,.25);
    background: rgba(26,188,156,.06);
    color:inherit
  }
  .share a:hover{ border-color: var(--brand) }
  .small{ color:var(--muted); font-size:.9rem }

  @media (prefers-color-scheme: dark) {
    :root {
      --bg: #ffffff !important;
      --surface: #ffffff !important;
      --text: #2d3436 !important;
      --muted: #59616a !important;
    }
    body {
      background: #ffffff !important;
      color: #2d3436 !important;
    }
    .result-item, .result-accent {
      background: #f8f9fa !important;
      color: #2d3436 !important;
    }
  }
</style>
</head>
<body>

<div class="calculator-container">
  <div class="calculator-header">
    <h2>Ø­Ø§Ø³Ø¨Ø© Ø±Ø³ÙˆÙ… ØªØ§Ø¨ÙŠ ÙˆØªÙ…Ø§Ø±Ø§</h2>
    <p class="subtitle">Ø§Ø­Ø³Ø¨ ØµØ§ÙÙŠ Ø§Ù„ØªØ§Ø¬Ø± Ø¨Ø¹Ø¯ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø²ÙˆØ¯ + <b>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© Ø§Ù„Ø¥Ù„Ø²Ø§Ù…ÙŠØ© (15%)</b></p>
  </div>

  <div class="input-group">
    <label>Ù…Ø¨Ù„Øº Ø§Ù„Ø¨ÙŠØ¹ Ø§Ù„ÙƒÙ„ÙŠ
      <img src="https://www.sama.gov.sa/ar-sa/Currency/Documents/Saudi_Riyal_Symbol-2.svg" class="sar-symbol" alt="SAR">
    </label>
    <input type="number" id="totalAmount" class="input-field" placeholder="Ù…Ø«Ø§Ù„: 1000" inputmode="decimal" step="0.01">
  </div>

  <div class="company-select" id="companySelect">
    <div class="company-option" onclick="selectCompany('tabby')" data-company="tabby" id="optTabby">
      <img src="https://www2.0zz0.com/2025/04/10/18/188927461.png" class="company-logo" alt="Tabby">
      <div class="small">Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ…: 6.99% + 1.50 Ø±.Ø³</div>
    </div>
    <div class="company-option" onclick="selectCompany('tamara')" data-company="tamara" id="optTamara">
      <img src="https://www2.0zz0.com/2025/04/10/18/913906129.png" class="company-logo" alt="Tamara">
      <div class="small">Ù†Ø³Ø¨Ø© Ø§Ù„Ø®ØµÙ…: 6.99% + 1.50 Ø±.Ø³</div>
    </div>
  </div>

  <div class="badge">Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ù‚ÙŠÙ…Ø© Ø§Ù„Ù…Ø¶Ø§ÙØ© ØªÙØ­ØªØ³Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§: 15% Ø¹Ù„Ù‰ Ø¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø²ÙˆØ¯</div>

  <button class="calculate-btn" onclick="calculate()">ğŸ’° Ø§Ø­Ø³Ø¨Ù‡Ø§ Ù„ÙŠ</button>

  <div class="results-box" id="results" style="display:none;">
    <div class="result-item">
      <span>Ø§Ù„Ù…Ø¨Ù„Øº Ø§Ù„Ø¥Ø¬Ù…Ø§Ù„ÙŠ:</span>
      <strong><img src="https://www.sama.gov.sa/ar-sa/Currency/Documents/Saudi_Riyal_Symbol-2.svg" class="sar-symbol"><span id="totalAmountResult">0.00</span></strong>
    </div>

    <div class="result-item">
      <span>Ù†Ø³Ø¨Ø© ÙˆØ¹Ù…ÙˆÙ„Ø© Ø§Ù„Ù…Ø²ÙˆØ¯:</span>
      <strong id="feePercentage">â€”</strong>
    </div>

    <div class="result-item">
      <span>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ù‚Ø¨Ù„ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span>
      <strong><img src="https://www.sama.gov.sa/ar-sa/Currency/Documents/Saudi_Riyal_Symbol-2.svg" class="sar-symbol"><span id="feeAmount">0.00</span></strong>
    </div>

    <div class="result-item">
      <span>Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© (15%):</span>
      <strong><img src="https://www.sama.gov.sa/ar-sa/Currency/Documents/Saudi_Riyal_Symbol-2.svg" class="sar-symbol"><span id="taxAmount">0.00</span></strong>
    </div>

    <div class="result-item">
      <span>Ù‚ÙŠÙ…Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© Ø¨Ø¹Ø¯ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©:</span>
      <strong><img src="https://www.sama.gov.sa/ar-sa/Currency/Documents/Saudi_Riyal_Symbol-2.svg" class="sar-symbol"><span id="feeAfterTax">0.00</span></strong>
    </div>

    <div class="result-item result-accent">
      <span>Ø§Ù„ØµØ§ÙÙŠ Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ Ù„Ù„ØªØ§Ø¬Ø±:</span>
      <strong><img src="https://www.sama.gov.sa/ar-sa/Currency/Documents/Saudi_Riyal_Symbol-2.svg" class="sar-symbol"><span id="netAmount">0.00</span></strong>
    </div>

    <div style="margin-top:10px" class="small">* ÙŠØªÙ… Ø§Ø­ØªØ³Ø§Ø¨ Ø§Ù„Ø¶Ø±ÙŠØ¨Ø© Ø¹Ù„Ù‰ <b>Ø§Ù„Ø¹Ù…ÙˆÙ„Ø©</b> ÙÙ‚Ø·ØŒ Ø«Ù… ÙŠÙØ®ØµÙ… Ø¥Ø¬Ù…Ø§Ù„ÙŠ (Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© + Ø§Ù„Ø¶Ø±ÙŠØ¨Ø©) Ù…Ù† Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨.</div>
  </div>

  <div style="text-align:center; margin-top:18px;">
    <div style="margin-bottom:8px; font-weight:800">Ø´Ø§Ø±Ùƒ Ø§Ù„Ø­Ø§Ø³Ø¨Ù‡ Ù…Ø¹ ØªØ§Ø¬Ø± ØºÙŠØ±Ùƒ:</div>
    <div class="share" id="shareLinks"></div>
  </div>
</div>

<script>
  const companies = {
    tabby:  { fee: 6.99, fixed: 1.5, label: 'Tabby'  },
    tamara: { fee: 6.99, fixed: 1.5, label: 'Tamara' }
  };
  const TAX_RATE = 15;
  let selectedCompany = 'tabby';

  function selectCompany(c){
    selectedCompany = c;
    document.querySelectorAll('.company-option').forEach(el => el.classList.remove('active'));
    document.querySelector(`[data-company="${c}"]`).classList.add('active');
    if (document.getElementById('totalAmount').value) calculate();
  }

  const fmt = (n)=> new Intl.NumberFormat('ar', { maximumFractionDigits: 2 }).format(n);

  function calculate(){
    const amountEl = document.getElementById('totalAmount');
    const amount = parseFloat(amountEl.value);
    if (!amount || amount <= 0) { alert("Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø¥Ø¯Ø®Ø§Ù„ Ù…Ø¨Ù„Øº ØµØ­ÙŠØ­"); amountEl.focus(); return; }

    const cfg  = companies[selectedCompany];
    const fee  = (amount * (cfg.fee/100)) + cfg.fixed;
    const tax  = fee * (TAX_RATE/100);
    const feeAfterTax = fee + tax;
    const net  = amount - feeAfterTax;

    document.getElementById('results').style.display = 'block';
    document.getElementById('totalAmountResult').textContent = fmt(amount);
    document.getElementById('feePercentage').textContent = `${cfg.fee}% + ${cfg.fixed.toFixed(2)} Ø±.Ø³`;
    document.getElementById('feeAmount').textContent = fmt(fee);
    document.getElementById('taxAmount').textContent = fmt(tax);
    document.getElementById('feeAfterTax').textContent = fmt(feeAfterTax);
    document.getElementById('netAmount').textContent = fmt(net);

    buildShareLinks();
  }

  function buildShareLinks(){
    const amount = document.getElementById('totalAmount').value || '';
    const cfg = companies[selectedCompany];
    const base = location.origin + location.pathname;
    const qs = new URLSearchParams({ amount, company: selectedCompany });
    const url = base + '?' + qs.toString();

    const text = `Ø­Ø§Ø³Ø¨Ø© Ø±Ø³ÙˆÙ… ${cfg.label}: Ù‚ÙŠÙ…Ø© Ø§Ù„Ø·Ù„Ø¨ ${amount} Ø±.Ø³ + Ø¶Ø±ÙŠØ¨Ø© Ø§Ù„Ø¹Ù…ÙˆÙ„Ø© 15% (Ø¥Ù„Ø²Ø§Ù…ÙŠÙ‹Ø§) â€” Ø¬Ø±Ù‘Ø¨Ù‡Ø§: `;
    const wa = `https://wa.me/?text=${encodeURIComponent(text + url)}`;
    const x  = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
    const tg = `https://t.me/share/url?url=${encodeURIComponent(url)}&text=${encodeURIComponent(text)}`;

    const box = document.getElementById('shareLinks');
    box.innerHTML = '';
    box.appendChild(shareBtn('ğŸ“± ÙˆØ§ØªØ³Ø§Ø¨', wa));
    box.appendChild(shareBtn('ğ•', x));
    box.appendChild(shareBtn('âœˆï¸ ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…', tg));
    const copy = document.createElement('a'); copy.href='#'; copy.textContent='ğŸ”— Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·';
    copy.addEventListener('click', e => { e.preventDefault(); navigator.clipboard.writeText(url); alert('ØªÙ… Ù†Ø³Ø® Ø§Ù„Ø±Ø§Ø¨Ø·'); });
    box.appendChild(copy);
  }
  function shareBtn(label, href){ const a=document.createElement('a'); a.href=href; a.target="_blank"; a.rel="noopener"; a.textContent=label; return a; }

  (function loadFromQS(){
    const qs = new URLSearchParams(location.search);
    if (qs.has('company') && companies[qs.get('company')]) selectCompany(qs.get('company')); else selectCompany('tabby');
    if (qs.has('amount')) document.getElementById('totalAmount').value = qs.get('amount');
    if (qs.has('amount')) calculate(); else document.getElementById('optTabby').classList.add('active');
  })();
</script>

</body>
</html>
